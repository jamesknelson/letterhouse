---
import '../styles/_root.css'
import '../styles/_global.css'

import { getDrafts, getPreviews, getSite } from 'letterhouse'

import BlurbList from '../components/BlurbList.astro'
import MarginIntro from '../components/MarginIntro.astro'
import SiteLayout from '../layouts/SiteLayout.astro'

const draftsPromise = getDrafts()
const previewsPromise = getPreviews()

const site = await getSite()
const unpublished = [await draftsPromise, await previewsPromise].flat()
---

{site.unpublished && (
  <SiteLayout site={site}>
    <BlurbList letters={unpublished} />
    <MarginIntro site={site} slot="margin" />
  </SiteLayout>
)}
